{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "description": "A treemap based on CSV data.",
    "data": {
        "url": "treemap.csv",
        "format": { "type": "csv" }
    },
    "mark": { "type": "rect", "stroke": "#fff" },
    "encoding": {
        "color": {
            "field": "parent",
            "type": "nominal",
            "scale": {
                "scheme": "tableau20"
            },
            "legend": {
                "title": "Category"
            }
        },
        "tooltip": [
            { "field": "name", "type": "nominal", "title": "Name" },
            { "field": "parent", "type": "nominal", "title": "Parent" },
            { "field": "value", "type": "quantitative", "title": "Value" }
        ]
    },
    "transform": [{
        "treemap": {
            "field": "value",
            "sort": { "field": "value" },
            "method": "squarify",
            "paddingInner": 1,
            "paddingOuter": 1,
            "size": ["width", "height"],
            "as": ["x", "y", "depth", "children"]
        }
    }],
    "width": 800,
    "height": 600
}